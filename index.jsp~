<%@ page language="java" %>
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
<meta charset="utf-8"/>
<title>Codepamoja | Aptitude Tests</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<meta content="CodePamoja Aptitude Tests" name="description"/>
<meta content="Bixbyte" name="author"/>
<!-- BEGIN GLOBAL MANDATORY STYLES -->
<link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css"/>
<link href="./assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
<link href="./assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css"/>
<link href="./assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
<link href="./assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css"/>
<link rel="icon" href="./assets/images/logo.png">
<!-- END GLOBAL MANDATORY STYLES -->
<!-- BEGIN PAGE LEVEL STYLES -->

<!-- END PAGE LEVEL STYLES -->
<!-- BEGIN THEME STYLES -->
<link href="./assets/global/css/components-md.css" id="style_components" rel="stylesheet" type="text/css"/>
<link href="./assets/global/css/plugins-md.css" rel="stylesheet" type="text/css"/>
<link href="./assets/admin/layout/css/layout.css" rel="stylesheet" type="text/css"/>
<link id="style_color" href="./assets/admin/layout/css/themes/light2.css" rel="stylesheet" type="text/css"/>
<link href="./assets/admin/layout/css/custom.css" rel="stylesheet" type="text/css"/>
<!-- END THEME STYLES -->
<link rel="shortcut icon" href="favicon.ico"/>
<style>
    
    @media (min-width:700px){
       
    }
    @media (max-width:5000px){
        /*Class name*/{/*properties*/}
    }
    
    
    
    .editor{
        font-family: 'Courier New', Courier, 'Lucida Sans Typewriter', 'Lucida Typewriter', monospace;
        font-size: 16px;
        border: 0px;
        background-color: white;
        padding: 10px;
        min-height: 100% !important;
        height: 100% !important;
        display: inline-block;
        zoom: 1;
        *display: inline;
        background: url('./assets/images/bg.png') no-repeat !important;
        background-size: contain !important;
        background-position: center !important;
        color:blue !important;
        
        
    }
    .fill{
        min-height: 100% !important;
        height: 100% !important;
    }
    .pamoja{
        min-height: 320px !important;
    }
    .shadow{
        border: 1px solid;
        border-color: gainsboro;
        transition-duration: 0.5s;
        border-radius: 2%;
        text-shadow: 1px 1px yellow !important;
        opacity: 1 !important;
    }
    .shadow:hover{
         box-shadow: 1px 1px gainsboro;
         cursor: pointer;
         transition-duration: 0.5s;
         background-color: rgba(27, 163, 156, 0.8);
         text-shadow: 1px 1px black!important;
         color:orange;
         font-weight: bold;
         border-radius: 5%;
    }
    .shadow:hover font {
        font-size: 45px !important;
        color: white !important;
        text-shadow: 1px 1px black !important;
        cursor: pointer;
        transition-duration: 0.5s;
    }
    .tests{
        opacity: 0.7;
        text-shadow: 1px 1px 1px black;
        transition-duration: 1s;
    }
    .tests:hover{
        opacity:1;
        transition-duration: 1s;
    }
    .doTest{
        /* display: none !important; */
        opacity: 1;  
        transition-duration: 1s;
    }
    .doTest:hover{
        background-color: darkslategrey;
        color: white !important;
        transition-duration: 1s;
    }
    
    .pager{
       max-height:1200px !important; 
        overflow-y:auto;
    }
    .pager>portal {
      
    }
    ::-webkit-scrollbar { 
        display: none; 
    }
    @namespace url(http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul);

     scrollbar{
      -moz-appearance: none !important;
     }

   .green{
   	background-color: #056937 !important;
   }
   
   .red{
   	background-color: #BE1723 !important;
   }
   
   .green-seagreen{
   	background-color: #056937 !important;
   }
   
   .orange{
   	background-color: #F39303 !important;
   	opacity: 0.7;
   }
   .black{
   	color: #000000 !important;
   	
   }
   .white{
   	color: #ffffff !important;
   	
   }

</style>

</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<!-- DOC: Apply "page-header-fixed-mobile" and "page-footer-fixed-mobile" class to body element to force fixed header or footer in mobile devices -->
<!-- DOC: Apply "page-sidebar-closed" class to the body and "page-sidebar-menu-closed" class to the sidebar menu element to hide the sidebar by default -->
<!-- DOC: Apply "page-sidebar-hide" class to the body to make the sidebar completely hidden on toggle -->
<!-- DOC: Apply "page-sidebar-closed-hide-logo" class to the body element to make the logo hidden on sidebar toggle -->
<!-- DOC: Apply "page-sidebar-hide" class to body element to completely hide the sidebar on sidebar toggle -->
<!-- DOC: Apply "page-sidebar-fixed" class to have fixed sidebar -->
<!-- DOC: Apply "page-footer-fixed" class to the body element to have fixed footer -->
<!-- DOC: Apply "page-sidebar-reversed" class to put the sidebar on the right side -->
<!-- DOC: Apply "page-full-width" class to the body element to have full width page without the sidebar menu -->
<body class="page-md page-header-fixed page-quick-sidebar-over-content page-sidebar-closed page-sidebar-hide-logo ">

<!-- BEGIN HEADER -->
<div class="page-header md-shadow-z-1-i navbar navbar-fixed-top">
	<!-- BEGIN HEADER INNER -->
	<div class="page-header-inner">
		<!-- BEGIN LOGO -->
		<div class="page-logo">
			<a href="">
			<img src="./assets/images/logo.png" width="33px" alt="logo" class="logo-default"/>
			</a>
			<div class="menu-toggler sidebar-toggler hide">
				<!-- DOC: Remove the above "hide" to enable the sidebar toggler button on header -->
			</div>

		</div>

		<!-- END LOGO -->
		<!-- BEGIN RESPONSIVE MENU TOGGLER -->
		<a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse">
		</a>
		<!-- END RESPONSIVE MENU TOGGLER -->
		<!-- BEGIN TOP NAVIGATION MENU -->
		<div class="top-menu row">
		<div class="alert pull-left" style="display:none; " id="response">I AM A CLASSLESS RESPONSE</div>
			<ul class="nav navbar-nav ">



				<!-- BEGIN USER LOGIN DROPDOWN -->
				<!-- DOC: Apply "dropdown-dark" class after below "dropdown-extended" to change the dropdown styte -->
				<li class="dropdown dropdown-user">
					<a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
					<img alt="" class="img-circle" src="./assets/images/favicon.jpeg"/>
					<span class="username username-hide-on-mobile">
					<%= request.getRemoteUser() %> </span>
					<i class="fa fa-angle-down"></i>
					</a>
					<ul class="dropdown-menu dropdown-menu-default">
					    <li>
							<a href="logout.jsp">
							<i class="icon-key"></i> Log Out </a>
						</li>
					</ul>
				</li>
				<!-- END USER LOGIN DROPDOWN -->
			</ul>
		</div>
		<!-- END TOP NAVIGATION MENU -->
	</div>
	<!-- END HEADER INNER -->
</div>
<!-- END HEADER -->
<div class="clearfix">
</div>
<!-- BEGIN CONTAINER -->
<div class="page-container">
	<!-- BEGIN SIDEBAR -->
	<div class="page-sidebar-wrapper">
		<!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
		<!-- DOC: Change data-auto-speed="200" to adjust the sub menu slide up/down speed -->
		<div class="page-sidebar navbar-collapse collapse">
			<!-- BEGIN SIDEBAR MENU -->
			<!-- DOC: Apply "page-sidebar-menu-light" class right after "page-sidebar-menu" to enable light sidebar menu style(without borders) -->
			<!-- DOC: Apply "page-sidebar-menu-hover-submenu" class right after "page-sidebar-menu" to enable hoverable(hover vs accordion) sub menu mode -->
			<!-- DOC: Apply "page-sidebar-menu-closed" class right after "page-sidebar-menu" to collapse("page-sidebar-closed" class must be applied to the body element) the sidebar sub menu mode -->
			<!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
			<!-- DOC: Set data-keep-expand="true" to keep the submenues expanded -->
			<!-- DOC: Set data-auto-speed="200" to adjust the sub menu slide up/down speed -->
			<ul class="page-sidebar-menu page-sidebar-menu-closed page-sidebar-menu-light" data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">
				<!-- DOC: To remove the sidebar toggler from the sidebar you just need to completely remove the below "sidebar-toggler-wrapper" LI element -->
				<li class="sidebar-toggler-wrapper">
					<!-- BEGIN SIDEBAR TOGGLER BUTTON -->
					<div class="sidebar-toggler">
					</div>
					<!-- END SIDEBAR TOGGLER BUTTON -->
				</li>
				<li class="start " onclick="reinit()">
					<a href="javascript:;" >
                        <i class="fa fa-home"></i>
                        <span class="title" >Tests Panel</span>
                        <span class="arrow "></span>
					</a>
				</li>
				<li class="start ">
					<a href="javascript:;">
                        <i class="fa fa-edit"></i>
                        <span class="title">All Aptitude Tests</span>
                        <span class="arrow "></span>
					</a>
					<ul class="sub-menu" id="testMenu" >
					    
					</ul>
				</li>
				<li class="start ">
					<a href="javascript:;">
                        <i class="fa fa-history"></i>
                        <span class="title">My Tests</span>
                        <span class="arrow "></span>
					</a>
					<ul class="sub-menu" id="activeMenu" >
					    
					</ul>
				</li>
			</ul>
			<!-- END SIDEBAR MENU -->
		</div>
	</div>
	<!-- END SIDEBAR -->
	
	<!-- BEGIN SAMPLE PORTLET CONFIGURATION MODAL FORM-->
<div class="modal fade" id="instructions" tabindex="-1" role="dialog" aria-labelledby="CodePamoja_view_instructions" aria-hidden="true" style="min-width: 90% !important;">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title"><i class="fa fa-info-circle fa-2x"></i> &nbsp; CodePamoja Aptitude Tests |  Instructions </h4>
            </div>
            <div class="modal-body" style="min-height:450px; !important;" id="instructionsBody">
               
            </div>
            <div class="modal-footer">
                <button type="button" class="btn green" data-dismiss="modal">Close</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
<!-- /.modal -->
<!-- END SAMPLE PORTLET CONFIGURATION MODAL FORM-->
	
	<!-- BEGIN CONTENT -->
	<div class="page-content-wrapper" >
	        	<div class="page-content" style="background: url('./assets/images/bg.png') no-repeat !important; background-size: contain !important; background-position: center !important; opacity: 1;">


			<!-- BEGIN PAGE HEADER-->
			<!--
                <h3 class="page-title">
                Codepamoja <small>| Aptitude Tests</small>
                </h3>
            -->

			<!-- END PAGE HEADER-->
			<!-- BEGIN PAGE CONTENT-->
			<div class="row">
				<div class="col-md-12" id="page_content">

                    

				</div>
			</div>
			<!-- END PAGE CONTENT-->
		</div>
	</div>
	<!-- END CONTENT -->
</div>
<!-- END CONTAINER -->
<!-- BEGIN FOOTER -->
<div class="page-footer">
	<div class="page-footer-inner">
		 2015 &copy; <a href="http://codepamoja.com" title="Codepamoja" target="_blank"> Codepamoja </a>
	</div>
	<div class="scroll-to-top">
		<i class="icon-arrow-up"></i>
	</div>
</div>
<!-- END FOOTER -->
<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
<!-- BEGIN CORE PLUGINS -->
<!--[if lt IE 9]>
<script src="./assets/global/plugins/respond.min.js"></script>
<script src="./assets/global/plugins/excanvas.min.js"></script>
<![endif]-->
<script src="./assets/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="./assets/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
<!-- IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
<script src="./assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
<script src="./assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="./assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->

<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="./assets/global/scripts/metronic.js" type="text/javascript"></script>
<script src="./assets/admin/layout/scripts/layout.js" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
    <!-- Cut out JS GOES HERE -->
    <script>
    //var m = new mandrill.Mandrill('tndQNQe5dKZqXdL0txTtFA');

        
    t_id = null;
    t_title = null;
    t_passMark = null;
        
        
    //! THE TEST UI LOADER
    var test = function(testNumber){

        $(function(){
            $("#page_content").html("");
            $.ajax({
                //url: "test_generator.jsp",
                url: "tests.jsp",
                data: {  act: "startTest", test_id: testNumber},
                /*converters: {
                  "text script": function(text){
                      return text();
                  }
                },*/
                method: "POST",
                success: function( response ){
                    $("#page_content").html(response);
                }
            });
        });

    };

    //! THE TEST UI LOADER
    var sample = function(testNumber){

        $(function(){
            $("#page_content").html("");
            $.ajax({
                //url: "test_generator.jsp",
                url: "tests.jsp",
                data: {  act: "sample" },
                converters: {
                  "text script": function(text){
                      return text();
                  }
                },
                method: "POST",
                success: function( response ){
                    $("#page_content").html(response);
                }
            });
        });

    };

    
    //!Default Page content initializer
    var reinit = function(){

        $(function(){
            
            pContent = $("#page_content");
            
            //!Test menu initializer 
            $.ajax({
               url : "tests.jsp",
               data: { act: "getMenu" },
               method: "POST",
               success: function(response){
                  
                   if( response.response === "SUCCESS" ){
                       
                       //!Generate the page menu
                       var testItems = response.data.message;
                       var myTests = response.data.command;
                      
                       //!Side Menu
                       var testMenu = "";
                       var pageMenu = "";
                       var customMenu = "";
                       var activeMenu = "";
                       var unifiedMenu = "";
                       
                       
                       
                       for( item in testItems ){
                           
                           //!store the relevant test data in localStorage
                           localStorage.setItem( testItems[item].test_id, JSON.stringify( testItems[item] ) );
                           
                           //!Prepare the sidebar menu
                           testMenu += '<li ><div class="btn" onclick="preview('+ testItems[item].test_id +')" style="width:100%;">'+ testItems[item].test_title +'</div></li>';
                           
                           //!Prepare the page menu for all tests
                           pageMenu += '<div class="alert red col-lg-12 tests" style="padding:10px; min-height:50px; cursor: pointer;border-radius:5px; box-shadow:1px 1px 1px grey;" onclick="preview('+ testItems[item].test_id +')"><font color="white" style="font-weight:bold; font-size:15px; text-transform: uppercase; text-align:center;">'+ testItems[item].test_title +'</font><i class="fa fa-book fa-3x pull-right " style="text-shadow: 2px 2px 8px grey; border:1px solid; border-color:grey; border-radius: 50%; padding:10px; cursor:pointer; color:white; box-shadow:1px 1px 1px grey; " onclick="preview('+ testItems[item].test_id +')"></i></div>';
                           
                       }
                       
                       for( test_i in myTests ){
                           
                           test_grade = (myTests[test_i].test_grade == 0 || myTests[test_i].test_grade == undefined )? "ng"  : myTests[test_i].test_grade;
                           
                           customMenu += '<div class="alert green col-lg-12 tests" style="padding:10px; min-height:50px; cursor:pointer; border-radius:5px; box-shadow:1px 1px 1px grey;" onclick="preview('+ myTests[test_i].test_id +')"><font color="white" style="font-weight:bold; text-transform:uppercase; font-size:15px; font-style: uppercase; text-align:center;"> My  '+ JSON.parse( localStorage.getItem( myTests[test_i].test_id ) ).test_title +'</font><i class="fa fa-pencil-square-o fa-3x pull-right " style="text-shadow: 2px 2px 8px grey; border:1px solid; border-color:white; border-radius: 50%; padding:10px; cursor:pointer; color:white; box-shadow:1px 1px 1px grey; " onclick="preview('+ myTests[test_i].test_id +')"> '+ test_grade +' </i></div>';
                           
                           activeMenu += '<li ><div class="btn" onclick="preview('+ myTests[test_i].test_id +')" style="width:100%;">'+ JSON.parse( localStorage.getItem( myTests[test_i].test_id ) ).test_title +'</div></li>';
                           
                       }
                       
                       if( customMenu == ""){
                           
                           customMenu = '<div class="alert alert-primary col-lg-12" style="padding:10px; min-height:50px;"><font color="green" style="font-weight:bold; font-size:15px; font-style: uppercase; text-align:center;">YOU HAVE NOT REGISTERED FOR ANY TESTS AS YET.</div>';
                           
                       }
                       
                       unifiedMenu = '<div class="col-lg-12 row"><div class="col-lg-6 pull-left pager" style=""><div class="well orange" style="color:white; text-shadow:1px 1px 1px red; font-weight:bold; font-size:20px; text-transform:uppercase; text-align:center; box-shadow:1px 1px 1px grey; border-radius:4px;" >select a test from list below</div><portal>'+ pageMenu +'</portal></div><div class="col-lg-6 pull-right pager" style=""><div class="well orange" style="color:white; text-shadow:1px 1px 1px black; font-weight:bold; font-size:20px; text-transform:uppercase; text-align:center; box-shadow:1px 1px 1px grey; border-radius:4px;" >Selected Tests</div><portal>'+ customMenu +'</portal> <a class="btn green pull-right" href="javascript:;" onclick="sample();">view a sample</a></div> </div>';
                       
                       $("#testMenu").html( testMenu );
                       $("#activeMenu").html( activeMenu );
                       $("#page_content").html( unifiedMenu )
                       
                   }else{
                       
                      //Show the error message 
                      pContent.html( response.data.message );
                      $("#testMenu").html( "<div class='btn red' style='width:250px;  word-wrap: break-word !important; overflow-x: scroll;'>" + response.data.message + "</div>" );
                       
                   }
                   
               }
            });

        });

    };
        
    var preview = function( test_id ){
    
      localStorage.setItem("active", localStorage.getItem( test_id ));
        
      $.ajax({
          url: "tests.jsp",
          data: { act: "getIntro", test_id: test_id },
          method: "POST",
          success: function( resp ){
              //console.log(resp)
              var current_test = JSON.parse( localStorage.getItem("active") );
             var title_bar =  '<div class="row col-lg-12 well center-block " ><div style="font-weight:bold; font-size: 24px; color: green; padding-left:13px; text-shadow: 2px 2px 8px white; text-align:left; font-weight:bold; "></i>'+ current_test.test_title +' <div class="pull-right" style="color:gray; font-size: 15px; padding: 7px;"> <i>pass mark </i>: <font color="red" >'+ current_test.pass_mark +'%</font> &nbsp; &nbsp; &nbsp; <i class="fa fa-play fa-3x fa-pull-left doTest orange" style="text-shadow: 2px 2px 8px white; border:1px solid; border-color:grey; border-radius: 50%; padding:10px; cursor:pointer; color:green; box-shadow:1px 1px 1px grey; " onclick="test('+ current_test.test_id +')"></i></div></div></div>';
              $("#page_content").html( title_bar + resp.data.message );
              localStorage.setItem("instructions", resp.data.message )
          }
      });
        
    };
        
    var showInstructions = function (){
        
        $("#instructionsBody").html( localStorage.getItem("instructions") );
        
    };
   
    //INITIALIZE THE PAGE LAYOUT
    (function(){
        reinit();
    })();
    </script>
<!-- END JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>
